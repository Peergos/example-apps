!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LunaMusicPlayer=e():t.LunaMusicPlayer=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=35)}([function(t,e,n){var r=n(9),o=n(8),i=n(21);e=function(t,e,n){var a,u;if(e=i(e,n),r(t))for(a=0,u=t.length;a<u;a++)e(t[a],a,t);else{var s=o(t);for(a=0,u=s.length;a<u;a++)e(t[s[a]],s[a],t)}return t},t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object String]"===r(t)},t.exports=e},function(t,e,n){var r=n(1),o=n(7),i=n(19);e=function(t){return o(r(t)?new i(t):t)},t.exports=e},function(t,e){e=function(t){return void 0===t},t.exports=e},function(t,e){var n=Object.prototype.toString;e=function(t){return n.call(t)},t.exports=e},function(t,e){e=function(t){var e=typeof t;return!!t&&("function"===e||"object"===e)},t.exports=e},function(t,e,n){var r=n(4);e=Array.isArray?Array.isArray:function(t){return"[object Array]"===r(t)},t.exports=e},function(t,e,n){var r=n(9),o=n(17),i=n(6),a=n(1);e=function(t){return t?i(t)?t:r(t)&&!a(t)?o(t):[t]:[]},t.exports=e},function(t,e,n){var r=n(11);e=Object.keys?Object.keys:function(t){var e=[];for(var n in t)r(t,n)&&e.push(n);return e},t.exports=e},function(t,e,n){var r=n(12),o=n(10),i=Math.pow(2,53)-1;e=function(t){if(!t)return!1;var e=t.length;return r(e)&&e>=0&&e<=i&&!o(t)},t.exports=e},function(t,e,n){var r=n(4);e=function(t){var e=r(t);return"[object Function]"===e||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e},t.exports=e},function(t,e){var n=Object.prototype.hasOwnProperty;e=function(t,e){return n.call(t,e)},t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object Number]"===r(t)},t.exports=e},function(t,e){e=function(t){return null==t?"":t.toString()},t.exports=e},function(t,e,n){var r=n(20),o=n(7),i=n(49),a=n(23),u=n(51);var s=(e=function(t,e){return s.extend(t,e)}).Base=function t(e,n,s){s=s||{};var f=n.className||a(n,"initialize.name")||"";delete n.className;var c=function(){var t=o(arguments);return this.initialize&&this.initialize.apply(this,t)||this};if(!u)try{c=new Function("toArr","return function "+f+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(o)}catch(t){}return i(c,e),c.prototype.constructor=c,c.extend=function(e,n){return t(c,e,n)},c.inherits=function(t){i(c,t)},c.methods=function(t){return r(c.prototype,t),c},c.statics=function(t){return r(c,t),c},c.methods(n).statics(s),c}(Object,{className:"Base",callSuper:function(t,e,n){return t.prototype[e].apply(this,n)},toString:function(){return this.constructor.name}});t.exports=e},function(t,e,n){var r=n(3),o=n(0);e=function(t,e){return function(n){return o(arguments,(function(i,a){if(0!==a){var u=t(i);o(u,(function(t){e&&!r(n[t])||(n[t]=i[t])}))}})),n}},t.exports=e},function(t,e,n){var r=n(10),o=n(5),i=n(6),a=n(21),u=n(43),s=n(46),f=n(47);e=function(t,e,n){return null==t?s:r(t)?a(t,e,n):o(t)&&!i(t)?u(t):f(t)},t.exports=e},function(t,e,n){var r=n(16),o=n(8),i=n(9);e=function(t,e,n){e=r(e,n);for(var a=!i(t)&&o(t),u=(a||t).length,s=Array(u),f=0;f<u;f++){var c=a?a[f]:f;s[f]=e(t[c],c,t)}return s},t.exports=e},function(t,e,n){var r=n(56),o=n(1),i=n(9),a=n(57);e=function(t,e){return o(t)?t.indexOf(e)>-1:(i(t)||(t=a(t)),r(t,e)>=0)},t.exports=e},function(t,e,n){var r=n(14),o=n(1),i=n(0),a=n(52),u=new(e=r({className:"Select",initialize:function(t){return this.length=0,t?o(t)?u.find(t):void(t.nodeType&&(this[0]=t,this.length=1)):this},find:function(t){var n=new e;return this.each((function(){a(n,this.querySelectorAll(t))})),n},each:function(t){return i(this,(function(e,n){t.call(e,n,e)})),this}}))(document);t.exports=e},function(t,e,n){e=n(15)(n(22)),t.exports=e},function(t,e,n){var r=n(3);e=function(t,e,n){if(r(e))return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}},t.exports=e},function(t,e,n){var r=n(8),o=n(40),i=n(41),a=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols;e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.prototype,s=void 0===n||n,f=e.unenumerable,c=void 0!==f&&f,l=e.symbol,h=void 0!==l&&l,d=[];if((c||h)&&a){var p=r;c&&a&&(p=a);do{d=d.concat(p(t)),h&&u&&(d=d.concat(u(t)))}while(s&&(t=o(t))&&t!==Object.prototype);d=i(d)}else if(s)for(var g in t)d.push(g);else d=r(t);return d},t.exports=e},function(t,e,n){var r=n(3),o=n(48);e=function(t,e){var n;for(n=(e=o(e,t)).shift();!r(n);){if(null==(t=t[n]))return;n=e.shift()}return t},t.exports=e},function(t,e){e=function(t,e){return e=null==e?t.length-1:+e,function(){var n,r=Math.max(arguments.length-e,0),o=new Array(r);for(n=0;n<r;n++)o[n]=arguments[n+e];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,arguments[0],o);case 2:return t.call(this,arguments[0],arguments[1],o)}var i=new Array(e+1);for(n=0;n<e;n++)i[n]=arguments[n];return i[e]=o,t.apply(this,i)}},t.exports=e},function(t,e,n){var r=n(26);e=function(t){return r(t).join("-")},t.exports=e},function(t,e){var n=/([A-Z])/g,r=/[_.\- ]+/g,o=/(^-)|(-$)/g;e=function(t){return(t=t.replace(n,"-$1").toLowerCase().replace(r,"-").replace(o,"")).split("-")},t.exports=e},function(t,e,n){var r=n(7),o=n(5),i=n(1),a=n(0),u=n(3),s=n(2);(e=function(t,e,n){if(t=s(t),u(n)&&i(e))return function(t,e){return t.getAttribute(e)}(t[0],e);var r=e;o(r)||((r={})[e]=n),function(t,e){a(t,(function(t){a(e,(function(e,n){t.setAttribute(n,e)}))}))}(t,r)}).remove=function(t,e){t=s(t),e=r(e),a(t,(function(t){a(e,(function(e){t.removeAttribute(e)}))}))},t.exports=e},function(t,e,n){var r=n(73),o=n(74),i=/^\s+|\s+$/g;e=function(t,e){return null==e?t.replace(i,""):r(o(t,e),e)},t.exports=e},function(t,e,n){(function(r){var o=n(81);e=o?window:r,t.exports=e}).call(this,n(30))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(12),o=n(5),i=n(10),a=n(1);e=function(t){if(r(t))return t;if(o(t)){var e=i(t.valueOf)?t.valueOf():t;t=o(e)?e+"":e}return a(t)?+t:0===t?t:+t},t.exports=e},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(96),o=n(97),i=n(98);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return f(this,t,e,n)}function f(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=u(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|d(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(c(e),t=u(t,e<0?0:0|d(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return N(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){var i,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var c=-1;for(i=n;i<u;i++)if(f(t,i)===f(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===s)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var l=!0,h=0;h<s;h++)if(f(t,i+h)!==f(e,h)){l=!1;break}if(l)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function w(t,e,n,r){return Y(N(e,t.length-n),t,n,r)}function _(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return _(t,e,n,r)}function T(t,e,n,r){return Y(z(e),t,n,r)}function S(t,e,n,r){return Y(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,u,s,f=t[o],c=null,l=f>239?4:f>223?3:f>191?2:1;if(o+l<=n)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(i=t[o+1]))&&(s=(31&f)<<6|63&i)>127&&(c=s);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(s=(15&f)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&f)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return f(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return l(null,t)},s.allocUnsafeSlow=function(t){return l(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(i,a),f=this.slice(r,o),c=t.slice(e,n),l=0;l<u;++l)if(f[l]!==c[l]){i=f[l],a=c[l];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=U(t[i]);return o}function x(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function D(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(t,e,n,r,i){return i||D(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||D(t,0,n,8),o.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);B(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:N(new s(t,r).toString()),u=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%u]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(30))},function(t,e,n){var r=n(10);e=function(t){return null!=t&&(!!t._isBuffer||t.constructor&&r(t.constructor.isBuffer)&&t.constructor.isBuffer(t))},t.exports=e},function(t,e,n){var r=n(13);e=function(t){return r(t).toLocaleLowerCase()},t.exports=e},function(t,e,n){n(36),n(37),t.exports=n(38)},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var r,o,i,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},f=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},h=l(n(39)),d=l(n(71)),p=l(n(75)),g=l(n(76)),v=n(82),y=l(n(0)),m=n(83),b=l(n(85)),w=l(n(89)),_=l(n(95)),A=l(n(103)),T=l(n(13)),S=l(n(31)),R=l(n(105)),C=l(n(107)),k=l(n(108)),E=l(n(6)),P=l(n(7)),x=v.classPrefix("music-player"),O=h.default(document),B=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];t.exports=function(t){function e(e,n){var r=(void 0===n?{}:n).audio,o=t.call(this)||this;o.audioList=[],o.curAudioIdx=-1,o.audio=new Audio,o.loop="all",o.shuffle=!1,o.audioTimeUpdate=!0,o.play=function(){if(o.curAudio)return o.audio.play()},o.pause=function(){o.curAudio&&o.audio.pause()},o.open=function(){return s(o,void 0,void 0,(function(){var t,e,n;return f(this,(function(r){switch(r.label){case 0:return t=this.audioList,[4,p.default({accept:".mp3,audio/*",multiple:!0})];case 1:return 0===(e=r.sent()).length||(n=t.length,y.default(e,(function(e){var n=m.splitName(e.name),r=n.title,o=n.artist;t.push({url:g.default(e),title:r,artist:o,file:e})})),this.setCur(n)),[2]}}))}))},o.togglePlay=function(){o.audio.paused?o.play():o.pause()},o.toggleShuffle=function(t){o.shuffle=!o.shuffle,h.default(t.curTarget).attr("class",x("icon icon-shuffle"+(o.shuffle?"":"-disabled")+" shuffle"))},o.onVolumeClick=function(t){var e=o.$volumeController.offset(),n=e.top,r=e.height,i=v.eventClient("y",t.origEvent);o.volume(1-(i-n)/(r-5))},o.onBarClick=function(t){var e=o.getBarClickTime(t);o.seek(e),o.updateTimeUi(e)},o.onListItemClick=function(t){var e=S.default(h.default(t.curTarget).data("idx"));o.setCur(e)},o.toggleList=function(){var t=o.$list,e=t.offset().height;t.css("height",e>0?"0":"auto")},o.onLoopClick=function(t){var e=o.loop;switch(e){case"all":e="one";break;case"one":e="off";break;case"off":e="all"}o.loop=e,h.default(t.curTarget).attr("class",x("icon icon-loop-"+e+" loop"))},o.onBarDragStart=function(){o.audioTimeUpdate=!1,O.on(v.drag("move"),o.onBarDragMove),O.on(v.drag("end"),o.onBarDragEnd)},o.onBarDragMove=function(t){o.updateTimeUi(o.getBarClickTime(t))},o.onBarDragEnd=function(t){O.off(v.drag("move"),o.onBarDragMove),O.off(v.drag("end"),o.onBarDragEnd),o.audioTimeUpdate=!0,o.onBarClick(t)},o.onVolumeDragStart=function(){o.$volume.addClass(x("active")),O.on(v.drag("move"),o.onVolumeDragMove),O.on(v.drag("end"),o.onVolumeDragEnd)},o.onVolumeDragMove=function(t){o.onVolumeClick(t)},o.onVolumeDragEnd=function(t){o.$volume.rmClass(x("active")),O.off(v.drag("move"),o.onVolumeDragMove),O.off(v.drag("end"),o.onVolumeDragEnd),o.onVolumeClick(t)},o.onLoaded=function(){var t=o.audio,e=0,n=t.buffered.length;n&&(e=t.buffered.end(n-1)/t.duration*100),o.$barLoaded.css("width",e.toFixed(2)+"%")},o.onEnded=function(){switch(o.loop){case"off":o.seek(0);break;case"one":o.seek(0),o.play();break;case"all":o.next()}},o.onPlay=function(){o.$play.html('<span class="'+x("icon icon-pause")+'"></span>')},o.onPause=function(){o.$play.html('<span class="'+x("icon icon-play")+'"></span>')},o.onTimeUpdate=function(){o.audioTimeUpdate&&o.updateTimeUi(o.audio.currentTime)},o.onLoadedMetaData=function(){if(o.curAudio){var t=o.curAudio,e=t.file,n=t.url;t.cover||A.default.read(e||n,{onSuccess:function(t){var n=o.curAudio;if(n){var r=t.tags,i=r.picture,a=r.title,u=r.artist;if(a&&(!e&&n.title||(n.title=a)),u&&(!e&&n.artist||(n.artist=u)),i&&(e||!n.cover)){var s=_.default(i.data,"Blob");n.cover=g.default(s)}o.updateInfo()}}})}o.$duration.text(b.default(Math.round(1e3*o.audio.duration),"mm:ss"))},r&&(E.default(r)||(r=P.default(r)),o.audioList=r);var i=h.default(e);return i.addClass("luna-music-player"),o.$container=i,o.appendTpl(),o.$body=i.find("."+x("body")),o.$title=i.find("."+x("title")),o.$artist=i.find("."+x("artist")),o.$curTime=i.find("."+x("cur-time")),o.$duration=i.find("."+x("duration")),o.$cover=i.find("."+x("cover")),o.$play=i.find("."+x("play")),o.$bar=i.find("."+x("controller-left")),o.$barPlayed=i.find("."+x("bar-played")),o.$barLoaded=i.find("."+x("bar-loaded")),o.$list=i.find("."+x("list")),o.$volume=i.find("."+x("volume")),o.$volumeController=i.find("."+x("volume-controller")),o.$volumeBarFill=i.find("."+x("volume-bar-fill")),o.$volumeIcon=i.find("."+x("volume")).find("span"),o.bindEvent(),R.default(o.audioList)||o.setCur(0,!1),o}return a(e,t),e.prototype.volume=function(t){t=k.default(t,0,1),this.audio.volume=t,this.$volumeBarFill.css("height",100*t+"%"),this.$volumeIcon.attr("class",x("icon icon-"+this.getVolumeIcon()))},e.prototype.destroy=function(){this.$container.rmClass("luna-music-player"),this.$container.html(""),this.pause()},e.prototype.seek=function(t){this.curAudio&&(t=Math.max(t,0),t=Math.min(t,this.audio.duration),this.audio.currentTime=t)},e.prototype.next=function(){if(!R.default(this.audioList)){var t=this.curAudioIdx,e=this.audioList.length;this.shuffle?t=C.default(0,e-1):++t>=e&&(t=0),this.setCur(t)}},e.prototype.getVolumeIcon=function(){var t=this.audio.volume;return 0===t?"volume-off":t<.5?"volume-down":"volume"},e.prototype.setCur=function(t,e){void 0===e&&(e=!0);var n=this.audio,r=this.audioList;this.curAudioIdx=t,this.curAudio=r[t],n.src=this.curAudio.url,n.load(),this.updateInfo(),this.renderList(),e&&this.play()},e.prototype.getBarClickTime=function(t){var e=this.$bar.offset(),n=e.left,r=e.width;return k.default((v.eventClient("x",t.origEvent)-n)/r,0,1)*this.audio.duration},e.prototype.renderList=function(){var t=this,e="";y.default(this.audioList,(function(n,r){e+=d.default(o||(o=u(['\n        <div class="','" data-idx="','">\n          <span class="','">','</span>\n          <span class="','">','</span>\n          <span class="','">',"</span>\n        </div>\n      "],['\n        <div class="','" data-idx="','">\n          <span class="','">','</span>\n          <span class="','">','</span>\n          <span class="','">',"</span>\n        </div>\n      "])),x("list-item"+(n===t.curAudio?" active":"")),T.default(r),x("list-idx"),r+1,x("list-title"),n.title,x("list-artist"),n.artist)})),this.$list.html(e)},e.prototype.updateInfo=function(){if(this.curAudio){var t=this.curAudio,e=t.title,n=t.artist,r=t.cover;this.$title.text(e),this.$artist.text(n?" - "+n:""),this.$cover.css("background-image",r?"url("+r+")":"none")}},e.prototype.bindEvent=function(){var t=this;this.$body.on("click","."+x("icon-file"),this.open).on("click","."+x("icon-list"),this.toggleList).on("click","."+x("play"),this.togglePlay).on("click","."+x("loop"),this.onLoopClick).on("click","."+x("shuffle"),this.toggleShuffle).on("click","."+x("controller-left"),this.onBarClick).on(v.drag("start"),"."+x("controller-left"),this.onBarDragStart).on("click","."+x("volume-controller"),this.onVolumeClick).on(v.drag("start"),"."+x("volume-controller"),this.onVolumeDragStart),this.$list.on("click","."+x("list-item"),this.onListItemClick),y.default(B,(function(e){t.audio.addEventListener(e,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.emit.apply(t,c([e],n))}),!1)})),this.on("loadedmetadata",this.onLoadedMetaData),this.on("timeupdate",this.onTimeUpdate),this.on("play",this.onPlay),this.on("pause",this.onPause),this.on("ended",this.onEnded),this.on("canplay",this.onLoaded),this.on("progress",this.onLoaded)},e.prototype.updateTimeUi=function(t){var e=t/this.audio.duration*100;this.$barPlayed.css("width",e.toFixed(2)+"%"),this.$curTime.text(b.default(Math.round(1e3*t),"mm:ss"))},e.prototype.appendTpl=function(){var t=T.default(100*this.audio.volume);this.$container.html(d.default(i||(i=u(['\n      <div class="','">\n        <div class="','">\n          <div class="','">\n            <span class="','"></span>\n          </div>\n        </div>\n        <div class="','">\n          <div class="','">\n            <span class="','">Title</span>\n            <span class="','"> - Artist</span>\n          </div>\n          <div class="','">\n            <div class="','">\n              <div class="','">\n                <div class="','"></div>\n                <div class="','">\n                  <span class="','"></span>\n                </div>\n              </div>\n            </div>\n            <div class="','">\n              <span class="','">\n                <span class="','">00:00</span> /\n                <span class="','">00:00</span>\n              </span>\n              <div class="','">\n                <span class="','"></span>\n                <div class="','">\n                  <div class="','">\n                    <div class="','" style="height: ','%"></div>\n                  </div>\n                </div>\n              </div>\n              <span class="','"></span>\n              <span class="','"></span>\n              <span class="','"></span>\n              <span class="','"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="','"></div>\n    '],['\n      <div class="','">\n        <div class="','">\n          <div class="','">\n            <span class="','"></span>\n          </div>\n        </div>\n        <div class="','">\n          <div class="','">\n            <span class="','">Title</span>\n            <span class="','"> - Artist</span>\n          </div>\n          <div class="','">\n            <div class="','">\n              <div class="','">\n                <div class="','"></div>\n                <div class="','">\n                  <span class="','"></span>\n                </div>\n              </div>\n            </div>\n            <div class="','">\n              <span class="','">\n                <span class="','">00:00</span> /\n                <span class="','">00:00</span>\n              </span>\n              <div class="','">\n                <span class="','"></span>\n                <div class="','">\n                  <div class="','">\n                    <div class="','" style="height: ','%"></div>\n                  </div>\n                </div>\n              </div>\n              <span class="','"></span>\n              <span class="','"></span>\n              <span class="','"></span>\n              <span class="','"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="','"></div>\n    '])),x("body"),x("body-left cover"),x("play"),x("icon icon-play"),x("body-right"),x("info"),x("title"),x("artist"),x("controller"),x("controller-left"),x("bar"),x("bar-loaded"),x("bar-played"),x("bar-thumb"),x("controller-right"),x("time"),x("cur-time"),x("duration"),x("volume"),x("icon icon-"+this.getVolumeIcon()),x("volume-controller"),x("volume-bar"),x("volume-bar-fill"),t,x("icon icon-shuffle"+(this.shuffle?"":"-disabled")+" shuffle"),x("icon icon-loop-"+this.loop+" loop"),x("icon icon-file"),x("icon icon-list"),x("list")))},e}(w.default)},function(t,e,n){var r=n(19),o=n(53),i=n(54),a=n(55),u=n(27),s=n(62),f=n(63),c=n(64),l=n(65),h=n(66),d=n(68),p=n(70),g=n(3),v=n(1);e=function(t){return new r(t)},r.methods({offset:function(){return o(this)},hide:function(){return this.css("display","none")},show:function(){return i(this),this},first:function(){return e(this[0])},last:function(){return e(f(this))},get:function(t){return this[t]},eq:function(t){return e(this[t])},on:function(t,e,n){return h.on(this,t,e,n),this},off:function(t,e,n){return h.off(this,t,e,n),this},html:function(t){var e=s.html(this,t);return g(t)?e:this},text:function(t){var e=s.text(this,t);return g(t)?e:this},val:function(t){var e=s.val(this,t);return g(t)?e:this},css:function(t,e){var n=a(this,t,e);return y(t,e)?n:this},attr:function(t,e){var n=u(this,t,e);return y(t,e)?n:this},data:function(t,e){var n=l(this,t,e);return y(t,e)?n:this},rmAttr:function(t){return u.remove(this,t),this},remove:function(){return c(this),this},addClass:function(t){return d.add(this,t),this},rmClass:function(t){return d.remove(this,t),this},toggleClass:function(t){return d.toggle(this,t),this},hasClass:function(t){return d.has(this,t)},parent:function(){return e(this[0].parentNode)},append:function(t){return p.append(this,t),this},prepend:function(t){return p.prepend(this,t),this},before:function(t){return p.before(this,t),this},after:function(t){return p.after(this,t),this}});var y=function(t,e){return g(e)&&v(t)};t.exports=e},function(t,e,n){var r=n(5),o=n(10),i=Object.getPrototypeOf,a={}.constructor;e=function(t){if(r(t)){if(i)return i(t);var e=t.__proto__;return e||null===e?e:o(t.constructor)?t.constructor.prototype:t instanceof a?a.prototype:void 0}},t.exports=e},function(t,e,n){var r=n(42);function o(t,e){return t===e}e=function(t,e){return e=e||o,r(t,(function(t,n,r){for(var o=r.length;++n<o;)if(e(t,r[n]))return!1;return!0}))},t.exports=e},function(t,e,n){var r=n(16),o=n(0);e=function(t,e,n){var i=[];return e=r(e,n),o(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i},t.exports=e},function(t,e,n){var r=n(44),o=n(45);e=function(t){return t=r({},t),function(e){return o(e,t)}},t.exports=e},function(t,e,n){var r=n(8);e=n(15)(r),t.exports=e},function(t,e,n){var r=n(8);e=function(t,e){var n=r(e),o=n.length;if(null==t)return!o;t=Object(t);for(var i=0;i<o;i++){var a=n[i];if(e[a]!==t[a]||!(a in t))return!1}return!0},t.exports=e},function(t,e){e=function(t){return t},t.exports=e},function(t,e,n){var r=n(6),o=n(23);e=function(t){return r(t)?function(e){return o(e,t)}:(e=t,function(t){return null==t?void 0:t[e]});var e},t.exports=e},function(t,e,n){var r=n(11),o=n(6);e=function(t,e){if(o(t))return t;if(e&&r(e,t))return[t];var n=[];return t.replace(i,(function(t,e,r,o){n.push(r?o.replace(a,"$1"):e||t)})),n};var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;t.exports=e},function(t,e,n){var r=n(50);e=function(t,e){t.prototype=r(e.prototype)},t.exports=e},function(t,e,n){var r=n(5);e=function(t){if(!r(t))return{};if(o)return o(t);function e(){}return e.prototype=t,new e};var o=Object.create;t.exports=e},function(t,e,n){var r=n(10);e="undefined"!=typeof wx&&r(wx.openLocation),t.exports=e},function(t,e,n){e=n(24)((function(t,e){for(var n=t.length,r=0,o=e.length;r<o;r++)for(var i=e[r],a=0,u=i.length;a<u;a++)t[n++]=i[a];return t.length=n,t})),t.exports=e},function(t,e,n){var r=n(2);e=function(t){var e=(t=r(t))[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},t.exports=e},function(t,e,n){var r=n(0),o=n(2);e=function(t){t=o(t),r(t,(function(t){(function(t){return"none"==getComputedStyle(t,"").getPropertyValue("display")})(t)&&(t.style.display=function(t){var e,n;i[t]||(e=document.createElement(t),document.documentElement.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),i[t]=n);return i[t]}(t.nodeName))}))};var i={};t.exports=e},function(t,e,n){var r=n(1),o=n(5),i=n(25),a=n(3),u=n(18),s=n(12),f=n(2),c=n(58),l=n(0);e=function(t,e,n){if(t=f(t),a(n)&&r(e))return function(t,e){return t.style[c(e)]||getComputedStyle(t,"").getPropertyValue(e)}(t[0],e);var d=e;o(d)||((d={})[e]=n),function(t,e){l(t,(function(t){var n=";";l(e,(function(t,e){e=c.dash(e),n+=e+":"+function(t,e){return s(e)&&!u(h,i(t))?e+"px":e}(e,t)+";"})),t.style.cssText+=n}))}(t,d)};var h=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];t.exports=e},function(t,e){e=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},t.exports=e},function(t,e,n){var r=n(0);e=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},t.exports=e},function(t,e,n){var r=n(59),o=n(60),i=n(61),a=n(11),u=n(25);(e=r((function(t){if(t=t.replace(f,""),t=o(t),a(c,t))return t;for(var e=s.length;e--;){var n=s[e]+i(t);if(a(c,n))return n}return t}))).dash=r((function(t){var n=e(t);return(f.test(n)?"-":"")+u(n)}));var s=["O","ms","Moz","Webkit"],f=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,c=document.createElement("p").style;t.exports=e},function(t,e,n){var r=n(11);e=function(t,e){var n=function(o){var i=n.cache,a=""+(e?e.apply(this,arguments):o);return r(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return n.cache={},n},t.exports=e},function(t,e,n){var r=n(26);function o(t,e){this[e]=t.replace(/\w/,(function(t){return t.toUpperCase()}))}e=function(t){var e=r(t),n=e[0];return e.shift(),e.forEach(o,e),n+=e.join("")},t.exports=e},function(t,e){e=function(t){return t.length<1?t:t[0].toUpperCase()+t.slice(1)},t.exports=e},function(t,e,n){var r=n(3),o=n(0),i=n(2);function a(t){return function(e,n){var a=(e=i(e))[0];if(r(n))return a?a[t]:"";a&&o(e,(function(e){e[t]=n}))}}e={html:a("innerHTML"),text:a("textContent"),val:a("value")},t.exports=e},function(t,e){e=function(t){var e=t?t.length:0;if(e)return t[e-1]},t.exports=e},function(t,e,n){var r=n(0),o=n(2);e=function(t){t=o(t),r(t,(function(t){var e=t.parentNode;e&&e.removeChild(t)}))},t.exports=e},function(t,e,n){var r=n(27),o=n(1),i=n(5),a=n(0);n(2);e=function(t,e,n){var u=e;return o(e)&&(u="data-"+e),i(e)&&(u={},a(e,(function(t,e){u["data-"+e]=t}))),r(t,u,n)},t.exports=e},function(t,e,n){var r=n(67),o=n(3),i=n(2),a=n(0);function u(t){return function(e,n,u,s){e=i(e),o(s)&&(s=u,u=void 0),a(e,(function(e){r[t](e,n,u,s)}))}}e={on:u("add"),off:u("remove")},t.exports=e},function(t,e,n){var r=n(14),o=n(18);function i(){return!0}function a(){return!1}function u(t){var n,r=this.events[t.type],o=s.call(this,t,r);t=new e.Event(t);for(var i,a,u=0;(a=o[u++])&&!t.isPropagationStopped();)for(t.curTarget=a.el,i=0;(n=a.handlers[i++])&&!t.isImmediatePropagationStopped();)!1===n.handler.apply(a.el,[t])&&(t.preventDefault(),t.stopPropagation())}function s(t,e){var n,r,i,a,u=t.target,s=[],f=e.delegateCount;if(u.nodeType)for(;u!==this;u=u.parentNode||this){for(r=[],a=0;a<f;a++)void 0===r[n=(i=e[a]).selector+" "]&&(r[n]=o(this.querySelectorAll(n),u)),r[n]&&r.push(i);r.length&&s.push({el:u,handlers:r})}return f<e.length&&s.push({el:this,handlers:e.slice(f)}),s}e={add:function(t,e,n,r){var o,i={selector:n,handler:r};t.events||(t.events={}),(o=t.events[e])||((o=t.events[e]=[]).delegateCount=0,t.addEventListener(e,(function(){u.apply(t,arguments)}),!1)),n?o.splice(o.delegateCount++,0,i):o.push(i)},remove:function(t,e,n,r){var o=t.events;if(o&&o[e])for(var i,a=o[e],u=a.length;u--;)i=a[u],n&&i.selector!=n||i.handler!=r||(a.splice(u,1),i.selector&&a.delegateCount--)},Event:r({className:"Event",initialize:function(t){this.origEvent=t},isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.origEvent;this.isDefaultPrevented=i,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.origEvent;this.isPropagationStopped=i,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.origEvent;this.isImmediatePropagationStopped=i,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}})},t.exports=e},function(t,e,n){var r=n(7),o=n(69),i=n(2),a=n(1),u=n(0);function s(t){return a(t)?t.split(/\s+/):r(t)}e={add:function(t,n){t=i(t);var r=s(n);u(t,(function(t){var n=[];u(r,(function(r){e.has(t,r)||n.push(r)})),0!==n.length&&(t.className+=(t.className?" ":"")+n.join(" "))}))},has:function(t,e){t=i(t);var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return o(t,(function(t){return n.test(t.className)}))},toggle:function(t,n){t=i(t),u(t,(function(t){if(!e.has(t,n))return e.add(t,n);e.remove(t,n)}))},remove:function(t,e){t=i(t);var n=s(e);u(t,(function(t){u(n,(function(e){t.classList.remove(e)}))}))}},t.exports=e},function(t,e,n){var r=n(16),o=n(9),i=n(8);e=function(t,e,n){e=r(e,n);for(var a=!o(t)&&i(t),u=(a||t).length,s=0;s<u;s++){var f=a?a[s]:s;if(e(t[f],f,t))return!0}return!1},t.exports=e},function(t,e,n){var r=n(0),o=n(2);function i(t){return function(e,n){e=o(e),r(e,(function(e){e.insertAdjacentHTML(t,n)}))}}e={before:i("beforebegin"),after:i("afterend"),append:i("beforeend"),prepend:i("afterbegin")},t.exports=e},function(t,e,n){var r=n(1),o=n(7),i=n(72),a=n(17),u=n(28);e=function(t){r(t)&&(t=o(t));for(var e="",n=arguments.length,f=new Array(n>1?n-1:0),c=1;c<n;c++)f[c-1]=arguments[c];for(var l=0,h=t.length;l<h;l++)e+=t[l],f[l]&&(e+=f[l]);for(var d=e.split("\n"),p=[],g=0,v=d.length;g<v;g++){var y=d[g],m=y.match(s);m&&p.push(m[1].length)}var b=p.length>0?i.apply(null,p):0;return u(a(d,(function(t){return" "===t[0]?t.slice(b):t})).join("\n"))};var s=/^(\s+)\S+/;t.exports=e},function(t,e){e=function(){for(var t=arguments,e=t[0],n=1,r=t.length;n<r;n++)t[n]<e&&(e=t[n]);return e},t.exports=e},function(t,e){var n=/^\s+/;e=function(t,e){if(null==e)return t.replace(n,"");for(var r,o,i=0,a=t.length,u=e.length,s=!0;s&&i<a;)for(s=!1,r=-1,o=t.charAt(i);++r<u;)if(o===e[r]){s=!0,i++;break}return i>=a?"":t.substr(i,a)},t.exports=e},function(t,e){var n=/\s+$/;e=function(t,e){if(null==e)return t.replace(n,"");for(var r,o,i=t.length-1,a=e.length,u=!0;u&&i>=0;)for(u=!1,r=-1,o=t.charAt(i);++r<a;)if(o===e[r]){u=!0,i--;break}return i>=0?t.substring(0,i+1):""},t.exports=e},function(t,e){e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e){var n=document.createElement("input");n.style.position="fixed",n.style.bottom="0",n.style.left="0",n.style.visibility="hidden",n.setAttribute("type","file"),t.accept&&n.setAttribute("accept",t.accept),t.multiple&&n.setAttribute("multiple",""),document.body.appendChild(n),n.addEventListener("change",(function(){document.body.removeChild(n),e(n.files)})),n.click()}))},t.exports=e},function(t,e,n){var r=n(77),o=n(78),i=n(79),a=n(80),u=n(7);e=function(t,e){return r(e=e||{},s),o(t)||i(t)||(t=new a(u(t),e)),URL.createObjectURL(t)};var s={type:"text/plain"};t.exports=e},function(t,e,n){e=n(15)(n(22),!0),t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object Blob]"===r(t)},t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object File]"===r(t)},t.exports=e},function(t,e,n){var r=n(29),o=n(0);e=r.Blob||function(t,e){e=e||{};var n=new i;return o(t,(function(t){n.append(t)})),e.type?n.getBlob(e.type):n.getBlob()};var i=r.BlobBuilder||r.WebKitBlobBuilder||r.MSBlobBuilder||r.MozBlobBuilder;t.exports=e},function(t,e){e="object"==typeof window&&"object"==typeof document&&9===document.nodeType,t.exports=e},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.eventClient=e.drag=e.classPrefix=void 0;var o=r(n(17)),i=r(n(28)),a=r(n(29));e.classPrefix=function(t){var e="luna-"+t+"-";return function(t){return o.default(i.default(t).split(/\s+/),(function(t){return""+e+t})).join(" ")}};var u="ontouchstart"in a.default,s={start:"touchstart",move:"touchmove",end:"touchend"},f={start:"mousedown",move:"mousemove",end:"mouseup"};e.drag=function(t){return u?s[t]:f[t]},e.eventClient=function(t,e){var n="x"===t?"clientX":"clientY";return e[n]?e[n]:e.changedTouches?e.changedTouches[0][n]:0}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.splitName=void 0;var o=r(n(84)),i=r(n(18));e.splitName=function(t){var e=o.default(t),n=e.name,r=e.ext;if(i.default(n," - ")){var a=n.replace(r,"").split(" - ");return{title:a[1],artist:a[0]}}return{title:n,artist:""}}},function(t,e){e=function(t){var e=t.match(n);return{dir:e[1],name:e[2],ext:e[3]}};var n=/^([\s\S]*?)((?:\.{1,2}|[^\\/]+?|)(\.[^./\\]*|))(?:[\\/]*)$/;t.exports=e},function(t,e,n){var r=n(86),o=n(87),i=n(13),a=Math.floor;e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hh:mm:ss";t=r(t);var n=a(t/864e5),o=a(t/36e5)%24,i=a(t/6e4)%60,f=a(t/1e3)%60,c=a(t)%1e3,l={d:n,h:o,hh:u(o),m:i,mm:u(i),s:f,ss:u(f),l:c,ll:u(c,3)};return e.replace(s,(function(t){return t in l?l[t]:t.slice(1,t.length-1)}))};var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o(i(t),e,"0")},s=/d{1,2}|h{1,2}|m{1,2}|s{1,2}|l{1,2}|"[^"]*"|'[^']*'/g;t.exports=e},function(t,e,n){var r=n(31);e=function(t){return t?(t=r(t))-t%1:0===t?t:0},t.exports=e},function(t,e,n){var r=n(88),o=n(13);e=function(t,e,n){var i=(t=o(t)).length;return n=n||" ",i<e&&(t=(r(n,e-i)+t).slice(-e)),t},t.exports=e},function(t,e){e=function(t,e){var n="";if(e<1)return"";for(;e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},t.exports=e},function(t,e,n){var r=n(14),o=n(11),i=n(0),a=n(90),u=n(91),s=n(94);e=r({initialize:function(){this._events=this._events||{}},on:function(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e),this},off:function(t,e){var n=this._events;if(o(n,t)){var r=n[t].indexOf(e);return r>-1&&n[t].splice(r,1),this}},once:function(t,e){return this.on(t,u(e)),this},emit:function(t){var e=this;if(o(this._events,t)){var n=a(arguments,1),r=s(this._events[t]);return i(r,(function(t){return t.apply(e,n)}),this),this}},removeAllListeners:function(t){return t?delete this._events[t]:this._events={},this}},{mixin:function(t){i(["on","off","once","emit"],(function(n){t[n]=e.prototype[n]})),t._events=t._events||{}}}),t.exports=e},function(t,e){e=function(t,e,n){var r=t.length;e=null==e?0:e<0?Math.max(r+e,0):Math.min(e,r),n=null==n?r:n<0?Math.max(r+n,0):Math.min(n,r);for(var o=[];e<n;)o.push(t[e++]);return o},t.exports=e},function(t,e,n){e=n(92)(n(93),2),t.exports=e},function(t,e,n){var r=n(24),o=n(7);e=r((function(t,e){return function(){var n=[];return n=(n=n.concat(e)).concat(o(arguments)),t.apply(this,n)}})),t.exports=e},function(t,e){e=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},t.exports=e},function(t,e,n){var r=n(5),o=n(6),i=n(20);e=function(t){return r(t)?o(t)?t.slice():i({},t):t},t.exports=e},function(t,e,n){(function(e){var r=n(1),o=n(99),i=n(100),a=n(6),u=n(33),s=n(101),f=n(34);function c(t,n){var c;if(n=f(n),r(t))c=new Uint8Array(o.decode(t));else if(i(t))t=t.slice(0),c=new Uint8Array(t);else if(a(t))c=new Uint8Array(t);else if("uint8array"===s(t))c=t.slice(0);else if(u(t)){c=new Uint8Array(t.length);for(var l=0;l<t.length;l++)c[l]=t[l]}if(c)switch(n){case"base64":c=o.encode(c);break;case"arraybuffer":c=c.buffer;break;case"array":c=[].slice.call(c);break;case"buffer":c=e.from(c);break;case"blob":c=new Blob([c.buffer])}return c}c.blobToArrBuffer=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t)},r.readAsArrayBuffer(t)}))},t.exports=c}).call(this,n(32).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=f(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=f(t),a=r[0],u=r[1],s=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),c=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;2===u&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,s[c++]=255&e);1===u&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,u=n-o;a<u;a+=16383)i.push(c(t,a,a+16383>u?u:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var o,i,a=[],u=e;u<n;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,f=s>>1,c=-7,l=n?o-1:0,h=n?-1:1,d=t[e+l];for(l+=h,i=d&(1<<-c)-1,d>>=-c,c+=u;c>0;i=256*i+t[e+l],l+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=f}return(d?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(a++,s/=2),a+l>=c?(u=0,a=c):a+l>=1?(u=(e*s-1)*Math.pow(2,o),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+d]=255&u,d+=p,u/=256,o-=8);for(a=a<<o|u,f+=o;f>0;t[n+d]=255&a,d+=p,a/=256,f-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){e={encode:function(t){var e,n,o=[],i=t.length,a=i%3;i-=a;for(var u=0;u<i;u+=3)o.push((e=(t[u]<<16)+(t[u+1]<<8)+t[u+2],r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]));return i=t.length,1===a?(n=t[i-1],o.push(r[n>>2]),o.push(r[n<<4&63]),o.push("==")):2===a&&(n=(t[i-2]<<8)+t[i-1],o.push(r[n>>10]),o.push(r[n>>4&63]),o.push(r[n<<2&63]),o.push("=")),o.join("")},decode:function(t){var e=t.length,r=0;"="===t[e-2]?r=2:"="===t[e-1]&&(r=1);var o,i,a,u,s,f,c,l=new Array(3*e/4-r);for(e=r>0?e-4:e,o=0,i=0;o<e;o+=4){var h=(a=t[o],u=t[o+1],s=t[o+2],f=t[o+3],n[a.charCodeAt(0)]<<18|n[u.charCodeAt(0)]<<12|n[s.charCodeAt(0)]<<6|n[f.charCodeAt(0)]);l[i++]=h>>16&255,l[i++]=h>>8&255,l[i++]=255&h}return 2===r?(c=n[t.charCodeAt(o)]<<2|n[t.charCodeAt(o+1)]>>4,l[i++]=255&c):1===r&&(c=n[t.charCodeAt(o)]<<10|n[t.charCodeAt(o+1)]<<4|n[t.charCodeAt(o+2)]>>2,l[i++]=c>>8&255,l[i++]=255&c),l}};for(var n=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;o++)n[r.charCodeAt(o)]=o;t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object ArrayBuffer]"===r(t)},t.exports=e},function(t,e,n){var r=n(4),o=n(102),i=n(34),a=n(33);e=function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===t&&(e="Null"),void 0===t&&(e="Undefined"),o(t)&&(e="NaN"),a(t)&&(e="Buffer"),e||(e=r(t).match(u))&&(e=e[1]),e?n?i(e):e:""};var u=/^\[object\s+(.*?)]$/;t.exports=e},function(t,e,n){var r=n(12);e=function(t){return r(t)&&t!==+t},t.exports=e},function(t,e,n){(function(e,n){t.exports=function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[a]={exports:{}};e[a][0].call(f.exports,(function(t){var n=e[a][1][t];return o(n||t)}),f,f.exports,t,e,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){},{}],2:[function(t,e,n){e.exports=XMLHttpRequest},{}],3:[function(t,n,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}(this,a(n).call(this)),f(u(e),"_array",void 0),f(u(e),"_size",void 0),e._array=t,e._size=t.length,e._isInitialized=!0,e}var r,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t),r=n,l=[{key:"canReadFile",value:function(t){return Array.isArray(t)||"function"==typeof e&&e.isBuffer(t)}}],(c=[{key:"init",value:function(t){setTimeout(t.onSuccess,0)}},{key:"loadRange",value:function(t,e){setTimeout(e.onSuccess,0)}},{key:"getByteAt",value:function(t){if(t>=this._array.length)throw new Error("Offset "+t+" hasn't been loaded yet.");return this._array[t]}}])&&i(r.prototype,c),l&&i(r,l),n}(t("./MediaFileReader"));n.exports=c},{"./MediaFileReader":11}],4:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=t("./ChunkedFileData"),c=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}(this,i(e).call(this)),s(a(n),"_blob",void 0),s(a(n),"_fileData",void 0),n._blob=t,n._fileData=new f,n}var n,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,l=[{key:"canReadFile",value:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File}}],(c=[{key:"_init",value:function(t){this._size=this._blob.size,setTimeout(t.onSuccess,1)}},{key:"loadRange",value:function(t,e){var n=this,r=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,t[0],t[1]+1),o=new FileReader;o.onloadend=function(r){var i=new Uint8Array(o.result);n._fileData.addData(t[0],i),e.onSuccess()},o.onerror=o.onabort=function(t){e.onError&&e.onError({type:"blob",info:o.error})},o.readAsArrayBuffer(r)}},{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}}])&&o(n.prototype,c),l&&o(n,l),e}(t("./MediaFileReader"));e.exports=c},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var i=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="_fileData")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this._fileData=[]}return o(t,null,[{key:"NOT_FOUND",get:function(){return-1}}]),o(t,[{key:"addData",value:function(t,e){var n=t+e.length-1,r=this._getChunkRange(t,n);if(-1===r.startIx)this._fileData.splice(r.insertIx||0,0,{offset:t,data:e});else{var o=this._fileData[r.startIx],i=this._fileData[r.endIx],a=t>o.offset,u=n<i.offset+i.data.length-1,s={offset:Math.min(t,o.offset),data:e};if(a){var f=this._sliceData(o.data,0,t-o.offset);s.data=this._concatData(f,e)}u&&(f=this._sliceData(s.data,0,i.offset-s.offset),s.data=this._concatData(f,i.data)),this._fileData.splice(r.startIx,r.endIx-r.startIx+1,s)}}},{key:"_concatData",value:function(t,e){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t)){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}return t.concat(e)}},{key:"_sliceData",value:function(t,e,n){return t.slice?t.slice(e,n):t.subarray(e,n)}},{key:"_getChunkRange",value:function(t,e){for(var n=-1,r=-1,o=0,i=0;i<this._fileData.length;o=++i){var a=(u=this._fileData[i].offset)+this._fileData[i].data.length;if(e<u-1)break;if(t<=a+1&&e>=u-1){n=i;break}}if(-1===n)return{startIx:-1,endIx:-1,insertIx:o};for(i=n;i<this._fileData.length;i++){var u;if(e>=(u=this._fileData[i].offset)-1&&(r=i),e<=(a=u+this._fileData[i].data.length)+1)break}return-1===r&&(r=n),{startIx:n,endIx:r}}},{key:"hasDataRange",value:function(t,e){for(var n=0;n<this._fileData.length;n++){var r=this._fileData[n];if(e<r.offset)return!1;if(t>=r.offset&&e<r.offset+r.data.length)return!0}return!1}},{key:"getByteAt",value:function(t){for(var e,n=0;n<this._fileData.length;n++){var r=this._fileData[n].offset,o=r+this._fileData[n].data.length-1;if(t>=r&&t<=o){e=this._fileData[n];break}}if(e)return e.data[t-e.offset];throw new Error("Offset "+t+" hasn't been loaded yet.")}}]),t}();e.exports=i},{}],6:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=t("./MediaTagReader"),h=[4,132],d=[6,134],p=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],g=function(t){function e(){var t,n;o(this,e);for(var r=arguments.length,i=new Array(r),f=0;f<r;f++)i[f]=arguments[f];return c(s(n=a(this,(t=u(e)).call.apply(t,[this].concat(i)))),"_commentOffset",void 0),c(s(n),"_pictureOffset",void 0),n}var n,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,l=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(t){return"fLaC"===String.fromCharCode.apply(String,t.slice(0,4))}}],(r=[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([4,7],{onSuccess:function(){n._loadBlock(t,4,e)}})}},{key:"_loadBlock",value:function(t,e,n){var r=this,o=t.getByteAt(e),i=t.getInteger24At(e+1,!0);if(-1!==h.indexOf(o)){var a=e+4;t.loadRange([a,a+i],{onSuccess:function(){r._commentOffset=a,r._nextBlock(t,e,o,i,n)}})}else-1!==d.indexOf(o)?(a=e+4,t.loadRange([a,a+i],{onSuccess:function(){r._pictureOffset=a,r._nextBlock(t,e,o,i,n)}})):r._nextBlock(t,e,o,i,n)}},{key:"_nextBlock",value:function(t,e,n,r,o){var i=this;n>127?i._commentOffset?o.onSuccess():o.onError({type:"loadData",info:"Comment block could not be found."}):t.loadRange([e+4+r,e+4+4+r],{onSuccess:function(){i._loadBlock(t,e+4+r,o)}})}},{key:"_parseData",value:function(t,e){for(var n,r,o,i,a,u,s=t.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),f=t.getLongAt(s,!1),c=s+4,l=0;l<f;l++){var h=t.getLongAt(c,!1),d=t.getStringWithCharsetAt(c+4,h,"utf-8").toString(),g=d.indexOf("="),v=[d.slice(0,g),d.slice(g+1)];switch(v[0]){case"TITLE":n=v[1];break;case"ARTIST":r=v[1];break;case"ALBUM":o=v[1];break;case"TRACKNUMBER":i=v[1];break;case"GENRE":a=v[1]}c+=4+h}if(this._pictureOffset){var y=t.getLongAt(this._pictureOffset,!0),m=this._pictureOffset+4,b=t.getLongAt(m,!0),w=m+4,_=t.getStringAt(w,b),A=w+b,T=t.getLongAt(A,!0),S=A+4,R=t.getStringWithCharsetAt(S,T,"utf-8").toString(),C=S+T+16,k=t.getLongAt(C,!0),E=C+4,P=t.getBytesAt(E,k,!0);u={format:_,type:p[y],description:R,data:P}}return{type:"FLAC",version:"1",tags:{title:n,artist:r,album:o,track:i,genre:a,picture:u}}}}])&&i(n.prototype,r),l&&i(n,l),e}(l);e.exports=g},{"./MediaTagReader":12}],7:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=t("./MediaTagReader"),c=(t("./MediaFileReader"),function(t){function e(){return o(this,e),a(this,u(e).apply(this,arguments))}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,f=[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(t){return"TAG"===String.fromCharCode.apply(String,t.slice(0,3))}}],(r=[{key:"_loadData",value:function(t,e){var n=t.getSize();t.loadRange([n-128,n-1],e)}},{key:"_parseData",value:function(t,e){var n=t.getSize()-128,r=t.getStringWithCharsetAt(n+3,30).toString(),o=t.getStringWithCharsetAt(n+33,30).toString(),i=t.getStringWithCharsetAt(n+63,30).toString(),a=t.getStringWithCharsetAt(n+93,4).toString(),u=t.getByteAt(n+97+28),s=t.getByteAt(n+97+29);if(0==u&&0!=s)var f="1.1",c=t.getStringWithCharsetAt(n+97,28).toString();else f="1.0",c=t.getStringWithCharsetAt(n+97,30).toString(),s=0;var h=t.getByteAt(n+97+30);if(h<255)var d=l[h];else d="";var p={type:"ID3",version:f,tags:{title:r,artist:o,album:i,year:a,comment:c,genre:d}};return s&&(p.tags.track=s),p}}])&&i(n.prototype,r),f&&i(n,f),e}(f)),l=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];e.exports=c},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t("./MediaFileReader");var o=t("./StringUtils"),i=t("./ArrayFileReader"),a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"getFrameReaderFunction",value:function(t){return t in s?s[t]:"T"===t[0]?s["T*"]:"W"===t[0]?s["W*"]:null}},{key:"readFrames",value:function(e,n,r,o,i){for(var a={},u=this._getFrameHeaderSize(o);e<n-u;){var s=this._readFrameHeader(r,e,o),f=s.id;if(!f)break;var c=s.flags,l=s.size,h=e+s.headerSize,d=r;if(e+=s.headerSize+s.size,!i||-1!==i.indexOf(f)){if("MP3e"===f||"\0MP3"===f||"\0\0MP"===f||" MP3"===f)break;c&&c.format.unsynchronisation&&(d=this.getUnsyncFileReader(d,h,l),h=0,l=d.getSize()),c&&c.format.data_length_indicator&&(h+=4,l-=4);var p=t.getFrameReaderFunction(f),g=p?p.apply(this,[h,l,d,c,o]):null,v={id:f,size:l,description:this._getFrameDescription(f),data:g};f in a?(a[f].id&&(a[f]=[a[f]]),a[f].push(v)):a[f]=v}}return a}},{key:"_getFrameHeaderSize",value:function(t){var e=t.major;return 2==e?6:3==e||4==e?10:0}},{key:"_readFrameHeader",value:function(t,e,n){var r=n.major,o=null,i=this._getFrameHeaderSize(n);switch(r){case 2:var a=t.getStringAt(e,3),u=t.getInteger24At(e+3,!0);break;case 3:a=t.getStringAt(e,4),u=t.getLongAt(e+4,!0);break;case 4:a=t.getStringAt(e,4),u=t.getSynchsafeInteger32At(e+4)}return a!=String.fromCharCode(0,0,0)&&a!=String.fromCharCode(0,0,0,0)||(a=""),a&&r>2&&(o=this._readFrameFlags(t,e+8)),{id:a||"",size:u||0,headerSize:i||0,flags:o}}},{key:"_readFrameFlags",value:function(t,e){return{message:{tag_alter_preservation:t.isBitSetAt(e,6),file_alter_preservation:t.isBitSetAt(e,5),read_only:t.isBitSetAt(e,4)},format:{grouping_identity:t.isBitSetAt(e+1,7),compression:t.isBitSetAt(e+1,3),encryption:t.isBitSetAt(e+1,2),unsynchronisation:t.isBitSetAt(e+1,1),data_length_indicator:t.isBitSetAt(e+1,0)}}}},{key:"_getFrameDescription",value:function(t){return t in a?a[t]:"Unknown"}},{key:"getUnsyncFileReader",value:function(t,e,n){for(var r=t.getBytesAt(e,n),o=0;o<r.length-1;o++)255===r[o]&&0===r[o+1]&&r.splice(o+1,1);return new i(r)}}],(n=null)&&r(e.prototype,n),o&&r(e,o),t}(),s={};function f(t){var e;switch(t){case 0:e="iso-8859-1";break;case 1:e="utf-16";break;case 2:e="utf-16be";break;case 3:e="utf-8";break;default:e="iso-8859-1"}return e}function c(t,e,n,r){var o=n.getStringWithCharsetAt(t+1,e-1,r),i=n.getStringWithCharsetAt(t+1+o.bytesReadCount,e-1-o.bytesReadCount,r);return{user_description:o.toString(),data:i.toString()}}s.APIC=function(t,e,n,r,o){var i=t,a=f(n.getByteAt(t));switch(o&&o.major){case 2:var u=n.getStringAt(t+1,3);t+=4;break;case 3:case 4:t+=1+(u=n.getStringWithCharsetAt(t+1,e-1)).bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var s=n.getByteAt(t),c=l[s],h=n.getStringWithCharsetAt(t+1,e-(t-i)-1,a);return t+=1+h.bytesReadCount,{format:u.toString(),type:c,description:h.toString(),data:n.getBytesAt(t,i+e-t)}},s.CHAP=function(t,e,n,r,i){var a=t,u={},s=o.readNullTerminatedString(n.getBytesAt(t,e));u.id=s.toString(),t+=s.bytesReadCount,u.startTime=n.getLongAt(t,!0),t+=4,u.endTime=n.getLongAt(t,!0),t+=4,u.startOffset=n.getLongAt(t,!0),t+=4,u.endOffset=n.getLongAt(t,!0);var f=e-((t+=4)-a);return u.subFrames=this.readFrames(t,t+f,n,i),u},s.CTOC=function(t,e,n,r,i){var a=t,u={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},s=o.readNullTerminatedString(n.getBytesAt(t,e));u.id=s.toString(),t+=s.bytesReadCount,u.topLevel=n.isBitSetAt(t,1),u.ordered=n.isBitSetAt(t,0),t++,u.entryCount=n.getByteAt(t),t++;for(var f=0;f<u.entryCount;f++){var c=o.readNullTerminatedString(n.getBytesAt(t,e-(t-a)));u.childElementIds.push(c.toString()),t+=c.bytesReadCount}var l=e-(t-a);return u.subFrames=this.readFrames(t,t+l,n,i),u},s.COMM=function(t,e,n,r,o){var i=t,a=f(n.getByteAt(t)),u=n.getStringAt(t+1,3),s=n.getStringWithCharsetAt(t+4,e-4,a);t+=4+s.bytesReadCount;var c=n.getStringWithCharsetAt(t,i+e-t,a);return{language:u,short_description:s.toString(),text:c.toString()}},s.COM=s.COMM,s.PIC=function(t,e,n,r,o){return s.APIC(t,e,n,r,o)},s.PCNT=function(t,e,n,r,o){return n.getLongAt(t,!1)},s.CNT=s.PCNT,s["T*"]=function(t,e,n,r,o){var i=f(n.getByteAt(t));return n.getStringWithCharsetAt(t+1,e-1,i).toString()},s.TXXX=function(t,e,n,r,o){var i=f(n.getByteAt(t));return c(t,e,n,i)},s.WXXX=function(t,e,n,r,o){if(0===e)return null;var i=f(n.getByteAt(t));return c(t,e,n,i)},s["W*"]=function(t,e,n,r,o){return 0===e?null:n.getStringWithCharsetAt(t,e,"iso-8859-1").toString()},s.TCON=function(t,e,n,r){var o=s["T*"].apply(this,arguments);return o.replace(/^\(\d+\)/,"")},s.TCO=s.TCON,s.USLT=function(t,e,n,r,o){var i=t,a=f(n.getByteAt(t)),u=n.getStringAt(t+1,3),s=n.getStringWithCharsetAt(t+4,e-4,a);t+=4+s.bytesReadCount;var c=n.getStringWithCharsetAt(t,i+e-t,a);return{language:u,descriptor:s.toString(),lyrics:c.toString()}},s.ULT=s.USLT,s.UFID=function(t,e,n,r,i){var a=o.readNullTerminatedString(n.getBytesAt(t,e));t+=a.bytesReadCount;var u=n.getBytesAt(t,e-a.bytesReadCount);return{ownerIdentifier:a.toString(),identifier:u}};var l=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];e.exports=u},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=t("./MediaTagReader"),c=(t("./MediaFileReader"),t("./ID3v2FrameReader")),l=function(t){function e(){return o(this,e),a(this,u(e).apply(this,arguments))}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,f=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(t){return"ID3"===String.fromCharCode.apply(String,t.slice(0,3))}}],(r=[{key:"_loadData",value:function(t,e){t.loadRange([6,9],{onSuccess:function(){t.loadRange([0,10+t.getSynchsafeInteger32At(6)-1],e)},onError:e.onError})}},{key:"_parseData",value:function(t,e){var n=0,r=t.getByteAt(n+3);if(r>4)return{type:"ID3",version:">2.4",tags:{}};var o=t.getByteAt(n+4),i=t.isBitSetAt(n+5,7),a=t.isBitSetAt(n+5,6),u=t.isBitSetAt(n+5,5),s=t.getSynchsafeInteger32At(n+6);n+=10,a&&(n+=4===r?t.getSynchsafeInteger32At(n):t.getLongAt(n,!0)+4);var f={type:"ID3",version:"2."+r+"."+o,major:r,revision:o,flags:{unsynchronisation:i,extended_header:a,experimental_indicator:u,footer_present:!1},size:s,tags:{}};if(e)var l=this._expandShortcutTags(e);var d=s+10;f.flags.unsynchronisation&&(t=c.getUnsyncFileReader(t,n,s),n=0,d=t.getSize());var p=c.readFrames(n,d,t,f,l);for(var g in h)if(h.hasOwnProperty(g)){var v=this._getFrameData(p,h[g]);v&&(f.tags[g]=v)}for(var y in p)p.hasOwnProperty(y)&&(f.tags[y]=p[y]);return f}},{key:"_getFrameData",value:function(t,e){for(var n,r=0;n=e[r];r++)if(n in t)return(t[n]instanceof Array?t[n][0]:t[n]).data}},{key:"getShortcuts",value:function(){return h}}])&&i(n.prototype,r),f&&i(n,f),e}(f),h={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};e.exports=l},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=t("./MediaTagReader"),c=(t("./MediaFileReader"),function(t){function e(){return o(this,e),a(this,u(e).apply(this,arguments))}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,f=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(t){return"ftyp"===String.fromCharCode.apply(String,t.slice(4,8))}}],(r=[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([0,16],{onSuccess:function(){n._loadAtom(t,0,"",e)},onError:e.onError})}},{key:"_loadAtom",value:function(t,e,n,r){if(e>=t.getSize())r.onSuccess();else{var o=this,i=t.getLongAt(e,!0);if(0==i||isNaN(i))r.onSuccess();else{var a=t.getStringAt(e+4,4);if(this._isContainerAtom(a)){"meta"==a&&(e+=4);var u=(n?n+".":"")+a;"moov.udta.meta.ilst"===u?t.loadRange([e,e+i],r):t.loadRange([e+8,e+8+8],{onSuccess:function(){o._loadAtom(t,e+8,u,r)},onError:r.onError})}else t.loadRange([e+i,e+i+8],{onSuccess:function(){o._loadAtom(t,e+i,n,r)},onError:r.onError})}}}},{key:"_isContainerAtom",value:function(t){return["moov","udta","meta","ilst"].indexOf(t)>=0}},{key:"_canReadAtom",value:function(t){return"----"!==t}},{key:"_parseData",value:function(t,e){var n={};for(var r in e=this._expandShortcutTags(e),this._readAtom(n,t,0,t.getSize(),e),d)if(d.hasOwnProperty(r)){var o=n[d[r]];o&&(n[r]="track"===r?o.data.track:o.data)}return{type:"MP4",ftyp:t.getStringAt(8,4),version:t.getLongAt(12,!0),tags:n}}},{key:"_readAtom",value:function(t,e,n,r,o,i,a){a=void 0===a?"":a+"  ";for(var u=n;u<n+r;){var s=e.getLongAt(u,!0);if(0==s)return;var f=e.getStringAt(u+4,4);if(this._isContainerAtom(f)){"meta"==f&&(u+=4);var c=(i?i+".":"")+f;return void this._readAtom(t,e,u+8,s-8,o,c,a)}(!o||o.indexOf(f)>=0)&&"moov.udta.meta.ilst"===i&&this._canReadAtom(f)&&(t[f]=this._readMetadataAtom(e,u)),u+=s}}},{key:"_readMetadataAtom",value:function(t,e){var n=t.getLongAt(e,!0),r=t.getStringAt(e+4,4),o=t.getInteger24At(e+16+1,!0),i=l[o];if("trkn"==r)a={track:t.getByteAt(e+16+11),total:t.getByteAt(e+16+13)};else if("disk"==r)a={disk:t.getByteAt(e+16+11),total:t.getByteAt(e+16+13)};else{var a,u=e+24,s=n-24;switch("covr"===r&&"uint8"===i&&(i="jpeg"),i){case"text":a=t.getStringWithCharsetAt(u,s,"utf-8").toString();break;case"uint8":a=t.getShortAt(u,!1);break;case"int":case"uint":a=("int"==i?1==s?t.getSByteAt:2==s?t.getSShortAt:4==s?t.getSLongAt:t.getLongAt:1==s?t.getByteAt:2==s?t.getShortAt:t.getLongAt).call(t,u+(8==s?4:0),!0);break;case"jpeg":case"png":a={format:"image/"+i,data:t.getBytesAt(u,s)}}}return{id:r,size:n,description:h[r]||"Unknown",data:a}}},{key:"getShortcuts",value:function(){return d}}])&&i(n.prototype,r),f&&i(n,f),e}(f)),l={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},h={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},d={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};e.exports=c},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=t("./StringUtils"),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_isInitialized",void 0),o(this,"_size",void 0),this._isInitialized=!1,this._size=0}var e,n,a;return e=t,a=[{key:"canReadFile",value:function(t){throw new Error("Must implement canReadFile function")}}],(n=[{key:"init",value:function(t){var e=this;if(!this._isInitialized)return this._init({onSuccess:function(){e._isInitialized=!0,t.onSuccess()},onError:t.onError});setTimeout(t.onSuccess,1)}},{key:"_init",value:function(t){throw new Error("Must implement init function")}},{key:"loadRange",value:function(t,e){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(t){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=this.getByteAt(t+r);return n}},{key:"isBitSetAt",value:function(t,e){return 0!=(this.getByteAt(t)&1<<e)}},{key:"getSByteAt",value:function(t){var e=this.getByteAt(t);return e>127?e-256:e}},{key:"getShortAt",value:function(t,e){var n=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return n<0&&(n+=65536),n}},{key:"getSShortAt",value:function(t,e){var n=this.getShortAt(t,e);return n>32767?n-65536:n}},{key:"getLongAt",value:function(t,e){var n=this.getByteAt(t),r=this.getByteAt(t+1),o=this.getByteAt(t+2),i=this.getByteAt(t+3),a=e?(((n<<8)+r<<8)+o<<8)+i:(((i<<8)+o<<8)+r<<8)+n;return a<0&&(a+=4294967296),a}},{key:"getSLongAt",value:function(t,e){var n=this.getLongAt(t,e);return n>2147483647?n-4294967296:n}},{key:"getInteger24At",value:function(t,e){var n=this.getByteAt(t),r=this.getByteAt(t+1),o=this.getByteAt(t+2),i=e?((n<<8)+r<<8)+o:((o<<8)+r<<8)+n;return i<0&&(i+=16777216),i}},{key:"getStringAt",value:function(t,e){for(var n=[],r=t,o=0;r<t+e;r++,o++)n[o]=String.fromCharCode(this.getByteAt(r));return n.join("")}},{key:"getStringWithCharsetAt",value:function(t,e,n){var r,o=this.getBytesAt(t,e);switch((n||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":r=i.readUTF16String(o,"utf-16be"===n);break;case"utf-8":r=i.readUTF8String(o);break;default:r=i.readNullTerminatedString(o)}return r}},{key:"getCharAt",value:function(t){return String.fromCharCode(this.getByteAt(t))}},{key:"getSynchsafeInteger32At",value:function(t){var e=this.getByteAt(t),n=this.getByteAt(t+1),r=this.getByteAt(t+2);return 127&this.getByteAt(t+3)|(127&r)<<7|(127&n)<<14|(127&e)<<21}}])&&r(e.prototype,n),a&&r(e,a),t}();e.exports=a},{"./StringUtils":13}],12:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t("./MediaFileReader");var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_mediaFileReader",void 0),o(this,"_tags",void 0),this._mediaFileReader=e,this._tags=null}var e,n,i;return e=t,i=[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(t){throw new Error("Must implement")}}],(n=[{key:"setTagsToRead",value:function(t){return this._tags=t,this}},{key:"read",value:function(t){var e=this;this._mediaFileReader.init({onSuccess:function(){e._loadData(e._mediaFileReader,{onSuccess:function(){try{var n=e._parseData(e._mediaFileReader,e._tags)}catch(e){if(t.onError)return void t.onError({type:"parseData",info:e.message})}t.onSuccess(n)},onError:t.onError})},onError:t.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(t,e){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(t,e){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(t){if(!t)return null;for(var e,n=[],r=this.getShortcuts(),o=0;e=t[o];o++)n=n.concat(r[e]||[e]);return n}}])&&r(e.prototype,n),i&&r(e,i),t}();e.exports=i},{"./MediaFileReader":11}],13:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_value",void 0),o(this,"bytesReadCount",void 0),o(this,"length",void 0),this._value=e,this.bytesReadCount=n,this.length=e.length}var e,n,i;return e=t,(n=[{key:"toString",value:function(){return this._value}}])&&r(e.prototype,n),i&&r(e,i),t}(),a={readUTF16String:function(t,e,n){var r=0,o=1,a=0;n=Math.min(n||t.length,t.length),254==t[0]&&255==t[1]?(e=!0,r=2):255==t[0]&&254==t[1]&&(e=!1,r=2),e&&(o=0,a=1);for(var u=[],s=0;r<n;s++){var f=t[r+o],c=(f<<8)+t[r+a];if(r+=2,0==c)break;if(f<216||f>=224)u[s]=String.fromCharCode(c);else{var l=(t[r+o]<<8)+t[r+a];r+=2,u[s]=String.fromCharCode(c,l)}}return new i(u.join(""),r)},readUTF8String:function(t,e){var n=0;e=Math.min(e||t.length,t.length),239==t[0]&&187==t[1]&&191==t[2]&&(n=3);for(var r=[],o=0;n<e;o++){var a=t[n++];if(0==a)break;if(a<128)r[o]=String.fromCharCode(a);else if(a>=194&&a<224){var u=t[n++];r[o]=String.fromCharCode(((31&a)<<6)+(63&u))}else if(a>=224&&a<240){u=t[n++];var s=t[n++];r[o]=String.fromCharCode(((255&a)<<12)+((63&u)<<6)+(63&s))}else if(a>=240&&a<245){var f=((7&a)<<18)+((63&(u=t[n++]))<<12)+((63&(s=t[n++]))<<6)+(63&t[n++])-65536;r[o]=String.fromCharCode(55296+(f>>10),56320+(1023&f))}}return new i(r.join(""),n)},readNullTerminatedString:function(t,e){var n=[];e=e||t.length;for(var r=0;r<e;){var o=t[r++];if(0==o)break;n[r-1]=String.fromCharCode(o)}return new i(n.join(""),r)}};e.exports=a},{}],14:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=t("./ChunkedFileData"),c=t("./MediaFileReader"),l=function(e){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}(this,i(n).call(this)),s(a(e),"_url",void 0),s(a(e),"_fileData",void 0),e._url=t,e._fileData=new f,e}var c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(n,e),c=n,h=[{key:"canReadFile",value:function(t){return"string"==typeof t&&/^[a-z]+:\/\//i.test(t)}},{key:"setConfig",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._config[e]=t[e]);for(var n=this._config.disallowedXhrHeaders,r=0;r<n.length;r++)n[r]=n[r].toLowerCase()}}],(l=[{key:"_init",value:function(t){n._config.avoidHeadRequests?this._fetchSizeWithGetRequest(t):this._fetchSizeWithHeadRequest(t)}},{key:"_fetchSizeWithHeadRequest",value:function(t){var e=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(n){var r=e._parseContentLength(n);r?(e._size=r,t.onSuccess()):e._fetchSizeWithGetRequest(t)},onError:t.onError})}},{key:"_fetchSizeWithGetRequest",value:function(t){var e=this,n=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",n,{onSuccess:function(n){var r=e._parseContentRange(n),o=e._getXhrResponseContent(n);if(r){if(null==r.instanceLength)return void e._fetchEntireFile(t);e._size=r.instanceLength}else e._size=o.length;e._fileData.addData(0,o),t.onSuccess()},onError:t.onError})}},{key:"_fetchEntireFile",value:function(t){var e=this;this._makeXHRRequest("GET",null,{onSuccess:function(n){var r=e._getXhrResponseContent(n);e._size=r.length,e._fileData.addData(0,r),t.onSuccess()},onError:t.onError})}},{key:"_getXhrResponseContent",value:function(t){return t.responseBody||t.responseText||""}},{key:"_parseContentLength",value:function(t){var e=this._getResponseHeader(t,"Content-Length");return null==e?e:parseInt(e,10)}},{key:"_parseContentRange",value:function(t){var e=this._getResponseHeader(t,"Content-Range");if(e){var n=e.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!n)throw new Error("FIXME: Unknown Content-Range syntax: "+e);return{firstBytePosition:parseInt(n[1],10),lastBytePosition:parseInt(n[2],10),instanceLength:n[3]?parseInt(n[3],10):null}}return null}},{key:"loadRange",value:function(t,e){var n=this;n._fileData.hasDataRange(t[0],Math.min(n._size,t[1]))?setTimeout(e.onSuccess,1):((t=this._roundRangeToChunkMultiple(t))[1]=Math.min(n._size,t[1]),this._makeXHRRequest("GET",t,{onSuccess:function(r){var o=n._getXhrResponseContent(r);n._fileData.addData(t[0],o),e.onSuccess()},onError:e.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(t){var e=t[1]-t[0]+1,n=1024*Math.ceil(e/1024);return[t[0],t[0]+n-1]}},{key:"_makeXHRRequest",value:function(t,e,r){var o=this._createXHRObject();o.open(t,this._url);var i=function(){200===o.status||206===o.status?r.onSuccess(o):r.onError&&r.onError({type:"xhr",info:"Unexpected HTTP status "+o.status+".",xhr:o}),o=null};void 0!==o.onload?(o.onload=i,o.onerror=function(){r.onError&&r.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:o})}):o.onreadystatechange=function(){4===o.readyState&&i()},n._config.timeoutInSec&&(o.timeout=1e3*n._config.timeoutInSec,o.ontimeout=function(){r.onError&&r.onError({type:"xhr",info:"Timeout after "+o.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:o})}),o.overrideMimeType("text/plain; charset=x-user-defined"),e&&this._setRequestHeader(o,"Range","bytes="+e[0]+"-"+e[1]),this._setRequestHeader(o,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),o.send(null)}},{key:"_setRequestHeader",value:function(t,e,r){n._config.disallowedXhrHeaders.indexOf(e.toLowerCase())<0&&t.setRequestHeader(e,r)}},{key:"_hasResponseHeader",value:function(t,e){var n=t.getAllResponseHeaders();if(!n)return!1;for(var r=n.split("\r\n"),o=[],i=0;i<r.length;i++)o[i]=r[i].split(":")[0].toLowerCase();return o.indexOf(e.toLowerCase())>=0}},{key:"_getResponseHeader",value:function(t,e){return this._hasResponseHeader(t,e)?t.getResponseHeader(e):null}},{key:"getByteAt",value:function(t){return 255&this._fileData.getByteAt(t).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(t("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}])&&o(c.prototype,l),h&&o(c,h),n}(c);s(l,"_config",void 0),l._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},e.exports=l},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t("./MediaFileReader");var s=t("./XhrFileReader"),f=t("./BlobFileReader"),c=t("./ArrayFileReader"),l=(t("./MediaTagReader"),t("./ID3v1TagReader")),h=t("./ID3v2TagReader"),d=t("./MP4TagReader"),p=t("./FLACTagReader"),g=[],v=[];function y(t,e){var n=t.offset>=0&&t.offset+t.length>=e,r=t.offset<0&&(-t.offset>e||t.offset+t.length>0);return!(n||r)}var m=function(){function t(e){o(this,t),u(this,"_file",void 0),u(this,"_tagsToRead",void 0),u(this,"_fileReader",void 0),u(this,"_tagReader",void 0),this._file=e}return a(t,[{key:"setTagsToRead",value:function(t){return this._tagsToRead=t,this}},{key:"setFileReader",value:function(t){return this._fileReader=t,this}},{key:"setTagReader",value:function(t){return this._tagReader=t,this}},{key:"read",value:function(t){var e=new(this._getFileReader())(this._file),n=this;e.init({onSuccess:function(){n._getTagReader(e,{onSuccess:function(r){new r(e).setTagsToRead(n._tagsToRead).read(t)},onError:t.onError})},onError:t.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var t=0;t<g.length;t++)if(g[t].canReadFile(this._file))return g[t];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(t,e){if(this._tagReader){var n=this._tagReader;setTimeout((function(){e.onSuccess(n)}),1)}else this._findTagReader(t,e)}},{key:"_findTagReader",value:function(t,e){for(var n=[],r=[],o=t.getSize(),i=0;i<v.length;i++){var a=v[i].getTagIdentifierByteRange();y(a,o)&&(a.offset>=0&&a.offset<o/2||a.offset<0&&a.offset<-o/2?n.push(v[i]):r.push(v[i]))}var u=!1,s={onSuccess:function(){if(u){for(var n=0;n<v.length;n++){var r=v[n].getTagIdentifierByteRange();if(y(r,o)){try{var i=t.getBytesAt(r.offset>=0?r.offset:r.offset+o,r.length)}catch(t){return void(e.onError&&e.onError({type:"fileReader",info:t.message}))}if(v[n].canReadTagFormat(i))return void e.onSuccess(v[n])}}e.onError&&e.onError({type:"tagFormat",info:"No suitable tag reader found"})}else u=!0},onError:e.onError};this._loadTagIdentifierRanges(t,n,s),this._loadTagIdentifierRanges(t,r,s)}},{key:"_loadTagIdentifierRanges",value:function(t,e,n){if(0!==e.length){for(var r=[Number.MAX_VALUE,0],o=t.getSize(),i=0;i<e.length;i++){var a=e[i].getTagIdentifierByteRange(),u=a.offset>=0?a.offset:a.offset+o,s=u+a.length-1;r[0]=Math.min(u,r[0]),r[1]=Math.max(s,r[1])}t.loadRange(r,n)}else setTimeout(n.onSuccess,1)}}]),t}(),b=function(){function t(){o(this,t)}return a(t,null,[{key:"addFileReader",value:function(e){return g.push(e),t}},{key:"addTagReader",value:function(e){return v.push(e),t}},{key:"removeTagReader",value:function(e){var n=v.indexOf(e);return n>=0&&v.splice(n,1),t}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){s.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(t){s.setConfig({disallowedXhrHeaders:t})}},{key:"setXhrTimeoutInSec",value:function(t){s.setConfig({timeoutInSec:t})}}]),t}();if(b.addFileReader(s).addFileReader(f).addFileReader(c).addTagReader(h).addTagReader(l).addTagReader(d).addTagReader(p),void 0!==n&&!n.browser)if("undefined"!=typeof navigator&&"ReactNative"===navigator.product){var w=t("./ReactNativeFileReader");b.addFileReader(w)}else{var _=t("./NodeFileReader");b.addFileReader(_)}e.exports={read:function(t,e){new m(t).read(e)},Reader:m,Config:b}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)}).call(this,n(32).Buffer,n(104))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,f=[],c=!1,l=-1;function h(){c&&s&&(c=!1,s.length?f=s.concat(f):l=-1,f.length&&d())}function d(){if(!c){var t=u(h);c=!0;for(var e=f.length;e;){for(s=f,f=[];++l<e;)s&&s[l].run();l=-1,e=f.length}s=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new p(t,e)),1!==f.length||c||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){var r=n(9),o=n(6),i=n(1),a=n(106),u=n(8);e=function(t){return null==t||(r(t)&&(o(t)||i(t)||a(t))?0===t.length:0===u(t).length)},t.exports=e},function(t,e,n){var r=n(4);e=function(t){return"[object Arguments]"===r(t)},t.exports=e},function(t,e){e=function(t,e,n){null==e&&(e=t,t=0);var r=Math.random();return n||t%1||e%1?Math.min(t+r*(e-t+parseFloat("1e-"+((r+"").length-1))),e):t+Math.floor(r*(e-t+1))},t.exports=e},function(t,e,n){var r=n(3);e=function(t,e,n){return r(n)&&(n=e,e=void 0),!r(e)&&t<e?e:t>n?n:t},t.exports=e}])}));
//# sourceMappingURL=luna-music-player.js.map